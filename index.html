<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pediatric Drug Dosage Calculator - UpToDate</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        select, input { margin: 10px; padding: 5px; }
        button { padding: 10px; }
        #result { margin-top: 20px; border: 1px solid #ccc; padding: 15px; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
        .disclaimer { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Pediatric Drug Dosage Calculator</h1>
    <p class="disclaimer">Disclaimer: This tool is for informational purposes only and based on data from UpToDate. Always consult a healthcare professional before administering any medication. Dosages may vary based on specific conditions, and this is not a substitute for medical advice.</p>
    
    <label for="drug">Select Drug:</label>
    <select id="drug">
        <option value="">--Choose a drug--</option>
        <option value="actifed">Actifed</option>
        <option value="amoxicillin">Amoxicillin</option>
        <option value="augmentin125">Augmentin 125/5ml</option>
        <option value="augmentin200">Augmentin 200/5ml</option>
        <option value="augmentin400">Augmentin 400/5ml</option>
        <option value="azithromycin">Azithromycin</option>
        <option value="cephalexin">Cephalexin</option>
        <option value="cetirizine">Cetirizine</option>
        <option value="ceftriaxone">Ceftriaxone</option>
        <option value="clarithromycin">Clarithromycin</option>
        <option value="clindamycin">Clindamycin</option>
        <option value="dextromethorphan">Dextromethorphan</option>
        <option value="diphenhydramine">Diphenhydramine</option>
        <option value="domperidone">Domperidone</option>
        <option value="ibuprofen">Ibuprofen</option>
        <option value="loratadine">Loratadine</option>
        <option value="montelukast">Montelukast</option>
        <option value="paracetamol">Paracetamol (Acetaminophen)</option>
        <option value="piriton">Piriton</option>
        <option value="prednisolone">Prednisolone</option>
        <option value="salbutamol">Salbutamol</option>
        <option value="theophylline">Theophylline</option>
        <option value="tmpsmx">Trimethoprim-Sulfamethoxazole (TMP-SMX)</option>
    </select>
    
    <label for="weight">Child's Weight (kg):</label>
    <input type="number" id="weight" min="1" step="0.1">
    
    <label for="age">Child's Age (years):</label>
    <input type="number" id="age" min="0" step="0.1">
    
    <button onclick="calculateDosage()">Calculate</button>
    
    <div id="result"></div>
    
    <script>
        const drugs = {
            actifed: {
                dosage: function(weight, age) {
                    if (age < 6) return 'Not recommended for children under 6 years.';
                    else if (age < 12) return '1.25 mg triprolidine + 30 mg pseudoephedrine every 4-6 hours (up to 4 times per day).';
                    else return '2.5 mg triprolidine + 60 mg pseudoephedrine every 4-6 hours (up to 4 times per day).';
                },
                sideEffects: 'Drowsiness, insomnia, hypertension, dry mouth, nervousness.',
                contraindications: 'Hypersensitivity, MAO inhibitors, severe hypertension, severe coronary artery disease.',
                g6pd_safe: 'Yes'
            },
            amoxicillin: {
                dosage: function(weight, age) {
                    let freq = 'every 8-12 hours';
                    let times = '2-3 times per day';
                    if (weight >= 40) {
                        return `250-500 mg ${freq} (${times}), or 875 mg every 12 hours (2 times per day).`;
                    } else {
                        let min_daily_kg = 20;
                        let max_daily_kg = 90;
                        let min_daily = min_daily_kg * weight;
                        let max_daily = max_daily_kg * weight;
                        let typical_dose = (80 * weight) / 3;
                        return `Daily total: ${min_daily.toFixed(1)}-${max_daily.toFixed(1)} mg, divided ${freq} (${times}). Typical high dose: ${typical_dose.toFixed(1)} mg 3 times per day.`;
                    }
                },
                sideEffects: 'Rash, diarrhoea, nausea, vomiting, superinfection, headache, behavioural changes. Potentially fatal: Hypersensitivity, C. difficile colitis.',
                contraindications: 'Hypersensitivity to penicillins or beta-lactams, infectious mononucleosis.',
                g6pd_safe: 'Yes'
            },
            augmentin125: {
                dosage: function(weight, age) {
                    if (age < 0.083) return 'Not recommended for neonates under 1 month.';
                    let freq, times, daily_kg;
                    if (age < 0.25) {
                        daily_kg = 30;
                        freq = 'every 12 hours';
                        times = '2 times per day';
                    } else {
                        daily_kg = 40;
                        freq = 'every 8 hours';
                        times = '3 times per day';
                    }
                    let dose_per_time = parseInt(times[0]);
                    let dose = (daily_kg * weight) / dose_per_time;
                    let max_daily = 2000;
                    return `${dose.toFixed(1)} mg (amoxicillin component) ${freq} (${times}). Max daily amoxicillin: ${max_daily} mg. Note: Based on 125 mg amoxicillin/31.25 mg clavulanate per 5 mL suspension.`;
                },
                sideEffects: 'Diarrhoea, nausea, vomiting, abdominal pain, rash, urticaria, superinfection. Potentially fatal: Anaphylaxis, Stevens-Johnson syndrome, C. difficile colitis, hepatotoxicity.',
                contraindications: 'Hypersensitivity to penicillins or beta-lactams, history of Augmentin-associated jaundice or hepatic dysfunction, infectious mononucleosis.',
                g6pd_safe: 'Yes'
            },
            augmentin200: {
                dosage: function(weight, age) {
                    if (age < 0.083) return 'Not recommended for neonates under 1 month.';
                    let dose_kg_low = 20;
                    let dose_kg_high = 45;
                    let low_dose = (dose_kg_low * weight) / 2;
                    let high_dose = (dose_kg_high * weight) / 2;
                    let freq = 'every 12 hours';
                    let times = '2 times per day';
                    let max_daily_kg = 90;
                    let max_daily = max_daily_kg * weight;
                    return `For mild-moderate infections: ${low_dose.toFixed(1)}-${high_dose.toFixed(1)} mg (amoxicillin component) ${freq} (${times}). For severe: up to ${(max_daily / 2).toFixed(1)} mg q12h. Max daily amoxicillin: ${max_daily.toFixed(1)} mg. Note: Based on 200 mg amoxicillin/28.5 mg clavulanate per 5 mL suspension.`;
                },
                sideEffects: 'Diarrhoea, nausea, vomiting, abdominal pain, rash, urticaria, superinfection. Potentially fatal: Anaphylaxis, Stevens-Johnson syndrome, C. difficile colitis, hepatotoxicity.',
                contraindications: 'Hypersensitivity to penicillins or beta-lactams, history of Augmentin-associated jaundice or hepatic dysfunction, infectious mononucleosis.',
                g6pd_safe: 'Yes'
            },
            augmentin400: {
                dosage: function(weight, age) {
                    if (age < 0.083) return 'Not recommended for neonates under 1 month.';
                    let dose_kg_low = 20;
                    let dose_kg_high = 45;
                    let low_dose = (dose_kg_low * weight) / 2;
                    let high_dose = (dose_kg_high * weight) / 2;
                    let freq = 'every 12 hours';
                    let times = '2 times per day';
                    let max_daily_kg = 90;
                    let max_daily = max_daily_kg * weight;
                    return `For mild-moderate infections: ${low_dose.toFixed(1)}-${high_dose.toFixed(1)} mg (amoxicillin component) ${freq} (${times}). For severe: up to ${(max_daily / 2).toFixed(1)} mg q12h. Max daily amoxicillin: ${max_daily.toFixed(1)} mg. Note: Based on 400 mg amoxicillin/57 mg clavulanate per 5 mL suspension.`;
                },
                sideEffects: 'Diarrhoea, nausea, vomiting, abdominal pain, rash, urticaria, superinfection. Potentially fatal: Anaphylaxis, Stevens-Johnson syndrome, C. difficile colitis, hepatotoxicity.',
                contraindications: 'Hypersensitivity to penicillins or beta-lactams, history of Augmentin-associated jaundice or hepatic dysfunction, infectious mononucleosis.',
                g6pd_safe: 'Yes'
            },
            azithromycin: {
                dosage: function(weight, age) {
                    if (age < 0.5) return 'Consult for infants under 6 months.';
                    if (weight > 45) return '500 mg on day 1, then 250 mg on days 2-5 (1 time per day), or 500 mg daily for 3 days.';
                    let dose_day1 = 10 * weight;
                    let dose_sub = 5 * weight;
                    return `${dose_day1.toFixed(1)} mg on day 1, then ${dose_sub.toFixed(1)} mg once daily on days 2-5 (1 time per day). Alternatively, ${dose_day1.toFixed(1)} mg once daily for 3 days.`;
                },
                sideEffects: 'Hearing loss, tinnitus, myasthenia gravis exacerbation, fungal superinfection, infantile hypertrophic pyloric stenosis, nausea, diarrhoea, abdominal pain, flatulence, vomiting, dyspepsia, dysgeusia, dizziness, headache, paraesthesia, somnolence, rash, pruritus. Potentially fatal: Hepatotoxicity, QT prolongation, C. difficile colitis, serious allergic reactions (e.g., anaphylaxis, Stevens-Johnson syndrome).',
                contraindications: 'Hypersensitivity to azithromycin or macrolides/ketolides, history of cholestatic jaundice/hepatic dysfunction with prior azithromycin.',
                g6pd_safe: 'Yes'
            },
            cephalexin: {
                dosage: function(weight, age) {
                    let mild_daily_kg = 50;
                    let severe_daily_kg = 100;
                    let mild_dose = (mild_daily_kg * weight) / 3;
                    let severe_dose = (severe_daily_kg * weight) / 3;
                    let freq = 'every 8 hours';
                    let times = '3 times per day';
                    let max_mild = 500;
                    let max_severe = 1000;
                    return `Mild-Moderate: ${mild_dose.toFixed(1)} mg ${freq} (${times}), max ${max_mild} mg/dose. Severe: ${severe_dose.toFixed(1)} mg ${freq} (${times}), max ${max_severe} mg/dose.`;
                },
                sideEffects: 'Diarrhea, nausea, vomiting, stomach pain, rash, itching, hives, allergic reactions, pseudomembranous colitis.',
                contraindications: 'Hypersensitivity to cephalexin, cephalosporins, or penicillins; history of severe allergic reactions or skin rash.',
                g6pd_safe: 'Yes'
            },
            cetirizine: {
                dosage: function(weight, age) {
                    if (age < 0.5) return 'Not recommended for <6 months.';
                    else if (age < 2) return '2.5 mg every 24 hours (1 time per day).';
                    else if (age < 6) return '2.5-5 mg every 24 hours (1 time per day).';
                    else if (age < 12) return '5 mg every 12 hours (2 times per day) or 10 mg once daily.';
                    else return '10 mg every 24 hours (1 time per day).';
                },
                sideEffects: 'Abdominal pain, dry mouth, nausea, diarrhoea, dizziness, headache, somnolence, fatigue.',
                contraindications: 'Severe renal impairment (CrCl <10 mL/min).',
                g6pd_safe: 'Yes'
            },
            ceftriaxone: {
                dosage: function(weight, age) {
                    if (age < 1/12) return 'Contraindicated in neonates if using calcium-containing IV solutions.';
                    let dose_low = 50 * weight;
                    let dose_high = 75 * weight;
                    let freq = 'every 24 hours';
                    let times = '1 time per day';
                    let max_dose = 2000;
                    return `${dose_low.toFixed(1)}-${dose_high.toFixed(1)} mg ${freq} (${times}), max ${max_dose} mg/dose. For meningitis: every 12 hours (2 times per day).`;
                },
                sideEffects: 'Diarrhea, nausea, headache, rash, injection site pain, eosinophilia, leukopenia, thrombocytopenia, increased hepatic enzymes.',
                contraindications: 'Hypersensitivity to ceftriaxone or cephalosporins; neonates requiring calcium-containing IV solutions; hyperbilirubinemic neonates.',
                g6pd_safe: 'Yes'
            },
            clarithromycin: {
                dosage: function(weight, age) {
                    let dose = 7.5 * weight;
                    let freq = 'every 12 hours';
                    let times = '2 times per day';
                    let max_dose = 500;
                    return `${dose.toFixed(1)} mg ${freq} (${times}), max ${max_dose} mg/dose.`;
                },
                sideEffects: 'Diarrhea, nausea, abnormal taste, dyspepsia, abdominal pain, headache, rash.',
                contraindications: 'Hypersensitivity to clarithromycin or macrolides, concomitant use with certain drugs (e.g., pimozide, ergot alkaloids).',
                g6pd_safe: 'Yes'
            },
            clindamycin: {
                dosage: function(weight, age) {
                    let dose_low = 7 * weight;
                    let dose_high = 13 * weight;
                    let freq = 'every 6-8 hours';
                    let times = '3-4 times per day';
                    let max_dose = 450;
                    return `${dose_low.toFixed(1)}-${dose_high.toFixed(1)} mg ${freq} (${times}), max ${max_dose} mg/dose. For severe infections, use higher end.`;
                },
                sideEffects: 'Diarrhea (including C. difficile colitis), nausea, vomiting, stomach pain, rash, metallic taste, allergic reactions.',
                contraindications: 'Hypersensitivity to clindamycin; history of pseudomembranous colitis or severe diarrhea with antibiotics.',
                g6pd_safe: 'Yes'
            },
            dextromethorphan: {
                dosage: function(weight, age) {
                    if (age < 2) return 'Not recommended for children under 2 years.';
                    if (age < 6) return '5 mg every 4 hours as needed (up to 6 times per day). Max daily: 30 mg.';
                    else if (age < 12) return '10-15 mg every 4-8 hours as needed (up to 4-6 times per day). Max daily: 60 mg.';
                    else return '30 mg every 6-8 hours (3-4 times per day). Max daily: 120 mg.';
                },
                sideEffects: 'Drug dependence (prolonged use), diarrhoea, gastrointestinal distress, stomach pain, nausea, vomiting, dizziness, drowsiness, convulsions, excitation, mental confusion, nervousness, restlessness, respiratory depression, rash.',
                contraindications: 'Acute asthma attack, respiratory insufficiency or depression, chronic cough with mucus, risk of respiratory failure (e.g., COPD, pneumonia), hepatic impairment. Concomitant use with MAOIs, SSRIs, other antidepressants, or Parkinson\'s medications.',
                g6pd_safe: 'Yes'
            },
            diphenhydramine: {
                dosage: function(weight, age) {
                    if (age < 2) return 'Not recommended for children under 2 years.';
                    let dose_low = 1 * weight;
                    let dose_high = 1.25 * weight;
                    let freq = 'every 6-8 hours';
                    let times = '3-4 times per day';
                    let max_daily = 5 * weight;
                    let max_dose = 50;
                    return `${dose_low.toFixed(1)}-${dose_high.toFixed(1)} mg ${freq} (${times}), max dose ${max_dose} mg. Max daily: ${max_daily.toFixed(1)} mg.`;
                },
                sideEffects: 'Drowsiness, excitation in some children, dry mouth, dizziness, nausea, tachycardia.',
                contraindications: 'Hypersensitivity, neonates, concomitant MAO inhibitors, severe liver disease.',
                g6pd_safe: 'Yes'
            },
            domperidone: {
                dosage: function(weight, age) {
                    if (age < 12 || weight < 35) return 'Not recommended for children under 12 years or weighing less than 35 kg.';
                    return '10 mg every 8 hours (up to 3 times per day). Max daily: 30 mg.';
                },
                sideEffects: 'Increased prolactin levels, QT prolongation, oculogyric crisis, dry mouth, diarrhoea, asthenia, anaphylactic reaction, abnormal LFT, headache, somnolence, convulsion, extrapyramidal disorder, anxiety, loss of libido, agitation, nervousness, urinary retention, breast pain/tenderness, galactorrhoea, amenorrhoea, gynaecomastia, rash, pruritus, angioedema, urticaria. Potentially fatal: Ventricular arrhythmias, Torsade de Pointes, sudden cardiac death.',
                contraindications: 'Prolactinoma, conditions where gastric motility stimulation is harmful (e.g., GI haemorrhage, obstruction), QT prolongation, cardiac disease (e.g., CHF), electrolyte disturbances, moderate/severe hepatic impairment. Concomitant use with QT-prolonging drugs or potent CYP3A4 inhibitors.',
                g6pd_safe: 'Yes'
            },
            ibuprofen: {
                dosage: function(weight, age) {
                    if (age < 0.5) return 'Not recommended for <6 months.';
                    let min_dose_kg = 5;
                    let max_dose_kg = 10;
                    let min_dose = min_dose_kg * weight;
                    let max_dose = max_dose_kg * weight;
                    let freq = 'every 6-8 hours';
                    let times = '3-4 times per day';
                    let max_daily_kg = 40;
                    let max_daily = max_daily_kg * weight;
                    let max_dose_single = 400;
                    return `${min_dose.toFixed(1)}-${max_dose.toFixed(1)} mg ${freq} (${times}), max single dose ${max_dose_single} mg. Max daily: ${max_daily.toFixed(1)} mg.`;
                },
                sideEffects: 'Hypertension, drowsiness, dizziness, tinnitus, nausea, vomiting, fatigue, headache, rash, pruritus. Potentially fatal: CV events, GI ulceration, hepatic reactions, severe skin reactions.',
                contraindications: 'Hypersensitivity to ibuprofen or NSAIDs, history of GI bleeding, severe heart failure, 3rd trimester pregnancy.',
                g6pd_safe: 'Yes'
            },
            loratadine: {
                dosage: function(weight, age) {
                    if (age < 2) return 'Not recommended for children under 2 years.';
                    let dose = age < 6 ? 5 : 10;
                    return `${dose} mg every 24 hours (1 time per day).`;
                },
                sideEffects: 'Fatigue, nervousness, headache, drowsiness, dizziness, convulsion, hypersensitivity reactions (anaphylaxis, angioedema), tachycardia, palpitation, nausea, dry mouth, gastritis, abnormal hepatic function, increased weight, appetite, insomnia, rash, alopecia.',
                contraindications: 'Severe hepatic and renal impairment (use with caution).',
                g6pd_safe: 'Yes'
            },
            montelukast: {
                dosage: function(weight, age) {
                    if (age < 0.5) return 'Not recommended under 6 months.';
                    let dose = age < 6 ? 4 : (age < 15 ? 5 : 10);
                    return `${dose} mg every 24 hours (1 time per day).`;
                },
                sideEffects: 'Headache, abdominal pain, neuropsychiatric events (agitation, anxiety, depression, sleep disorders), dizziness, dyspepsia, elevated liver enzymes.',
                contraindications: 'Hypersensitivity to montelukast.',
                g6pd_safe: 'Yes'
            },
            paracetamol: {
                dosage: function(weight, age) {
                    let dose_low_kg = 10;
                    let dose_high_kg = 15;
                    let dose_low = dose_low_kg * weight;
                    let dose_high = dose_high_kg * weight;
                    let freq = 'every 4-6 hours as needed';
                    let times = 'up to 4 times per day';
                    let max_daily_kg = age < 2 ? 60 : 75;
                    let max_daily = Math.min(max_daily_kg * weight, 4000);
                    return `${dose_low.toFixed(1)}-${dose_high.toFixed(1)} mg ${freq} (${times}). Max daily: ${max_daily.toFixed(1)} mg.`;
                },
                sideEffects: 'Anaemia, thrombocytopenia, tachycardia, nausea, vomiting, fatigue, hypokalaemia, dyspnoea, rash, pruritus, hypotension. Potentially fatal: Hepatic injury, anaphylaxis, serious skin reactions.',
                contraindications: 'Severe hepatic impairment or active liver disease (IV).',
                g6pd_safe: 'Yes'
            },
            piriton: {
                dosage: function(weight, age) {
                    if (age < 1) return 'Not recommended for children under 1 year.';
                    let dose;
                    if (age < 6) dose = 1;
                    else if (age < 12) dose = 2;
                    else dose = 4;
                    let freq = 'every 4-6 hours';
                    let times = 'up to 4 times per day';
                    let max_daily = age < 6 ? 6 : (age < 12 ? 12 : 24);
                    return `${dose} mg ${freq} (${times}). Max daily: ${max_daily} mg.`;
                },
                sideEffects: 'Drowsiness, dry mouth, dizziness, nausea, headache, urinary retention.',
                contraindications: 'Hypersensitivity, neonates, concomitant MAO inhibitors.',
                g6pd_safe: 'Yes'
            },
            prednisolone: {
                dosage: function(weight, age) {
                    let min_kg = 1;
                    let max_kg = 2;
                    let min_daily = min_kg * weight;
                    let max_daily = max_kg * weight;
                    let freq = 'every 12-24 hours';
                    let times = '1-2 times per day';
                    let max_daily_dose = 60;
                    return `Daily total: ${min_daily.toFixed(1)}-${max_daily.toFixed(1)} mg divided ${freq} (${times}), max daily ${max_daily_dose} mg. Use lowest effective dose for shortest duration.`;
                },
                sideEffects: 'Cushing\'s syndrome, HPA axis suppression, adrenal atrophy, Kaposi\'s sarcoma, growth retardation, withdrawal syndrome, immunosuppression, myopathy, psychiatric disturbances, electrolyte imbalances, fluid retention, hypertension, hyperglycaemia, osteoporosis, GI perforation, visual disturbances, glaucoma, cataracts. Blood: Leucocytosis. Cardiac: CHF, bradycardia. Ear: Vertigo. Endocrine: Diabetes manifestations. Eye: Mydriasis, ptosis, keratitis. GI: Nausea, vomiting, dyspepsia. General: Impaired healing, malaise. Immune: Hypersensitivity. Investigations: Weight increase. Metabolism: Negative protein/Ca balance. Musculoskeletal: Atrophy, weakness, fractures. Nervous: Headache, dizziness. Reproductive: Menstrual irregularities. Respiratory: Hiccups. Skin: Atrophy, acne, rash. Vascular: Thromboembolism. Potentially fatal: Adrenal insufficiency, scleroderma renal crisis.',
                contraindications: 'Oral: Untreated systemic infection, live vaccines (immunosuppressive doses). Ophthalmic: Herpes simplex, fungal/mycobacterial eye infections, viral diseases. Otic: Perforated tympanic membrane. Rectal: Traumatised anorectal mucosa (obstruction, fistulae, perforation).',
                g6pd_safe: 'Yes'
            },
            salbutamol: {
                dosage: function(weight, age) {
                    if (age < 2) return 'Clinical efficacy uncertain in <18 months.';
                    let dose_mg;
                    let times = '3-4 times per day';
                    let freq = 'every 6-8 hours';
                    if (age < 6) dose_mg = '1-2';
                    else if (age < 12) dose_mg = '2';
                    else dose_mg = '2-4';
                    return `${dose_mg} mg ${freq} (${times}).`;
                },
                sideEffects: 'Tachycardia, palpitations, tremor, headache, nausea, muscle cramps, hypokalaemia. Potentially fatal: Paradoxical bronchospasm.',
                contraindications: 'For IV in premature labour: ischaemic heart disease, <22 weeks gestation. Non-IV: Not for uncomplicated premature labour.',
                g6pd_safe: 'Yes'
            },
            theophylline: {
                dosage: function(weight, age) {
                    if (age < 1) return 'Consult for infants under 1 year; use with caution.';
                    let daily_kg;
                    if (age < 9) daily_kg = 22;
                    else if (age < 12) daily_kg = 16;
                    else if (age < 16) daily_kg = 13;
                    else daily_kg = 10;
                    let dose = (daily_kg * weight) / 4;
                    let freq = 'every 6 hours';
                    let times = '4 times per day';
                    let max_daily = daily_kg * weight;
                    return `${dose.toFixed(1)} mg ${freq} (${times}). Max daily: ${max_daily.toFixed(1)} mg. Monitor serum levels.`;
                },
                sideEffects: 'Nausea, vomiting, headache, tachycardia, seizures, hypokalemia.',
                contraindications: 'Hypersensitivity, uncontrolled arrhythmias, hyperthyroidism.',
                g6pd_safe: 'Yes'
            },
            tmpsmx: {
                dosage: function(weight, age) {
                    if (age < 2/12) return 'Contraindicated in infants less than 2 months.';
                    let mild_dose = 4 * weight;
                    let severe_dose = (15 * weight) / 4;
                    let mild_freq = 'every 12 hours';
                    let mild_times = '2 times per day';
                    let severe_freq = 'every 6 hours';
                    let severe_times = '4 times per day';
                    let max_mild = 160;
                    let max_severe = 320;
                    return `Mild-Moderate: ${mild_dose.toFixed(1)} mg TMP ${mild_freq} (${mild_times}), max ${max_mild} mg TMP/dose. Serious/PCP: ${severe_dose.toFixed(1)} mg TMP ${severe_freq} (${severe_times}), max ${max_severe} mg TMP/dose.`;
                },
                sideEffects: 'Nausea, vomiting, diarrhea, rash, itching, hypersensitivity reactions, blood disorders, photosensitivity, Stevens-Johnson syndrome.',
                contraindications: 'Hypersensitivity to sulfa drugs or trimethoprim; infants <2 months; megaloblastic anemia due to folate deficiency; severe renal impairment.',
                g6pd_safe: 'No'
            }
        };

        function calculateDosage() {
            const drug = document.getElementById('drug').value;
            const weight = parseFloat(document.getElementById('weight').value);
            const age = parseFloat(document.getElementById('age').value);
            
            if (!drug || isNaN(weight) || weight <= 0 || isNaN(age) || age < 0) {
                document.getElementById('result').innerHTML = '<p>Please select a drug and enter valid weight and age.</p>';
                return;
            }
            
            const info = drugs[drug];
            const dosage = info.dosage(weight, age);
            const g6pd_safe = info.g6pd_safe;
            const g6pd_color = g6pd_safe === 'Yes' ? 'green' : 'red';
            
            document.getElementById('result').innerHTML = `
                <h2>${drug.charAt(0).toUpperCase() + drug.slice(1).replace(/(\d+)/, ' $1').replace('tmpsmx', 'TMP-SMX')}</h2>
                <p><strong>Calculated Dosage:</strong> ${dosage}</p>
                <table>
                    <tr><th>Category</th><th>Details</th></tr>
                    <tr><td>Potential Side Effects</td><td>${info.sideEffects}</td></tr>
                    <tr><td>Contraindications</td><td>${info.contraindications}</td></tr>
                    <tr><td>Safe for G6PD Deficiency</td><td><span style="color:${g6pd_color};">${g6pd_safe}</span></td></tr>
                </table>
            `;
        }
    </script>
</body>
</html>